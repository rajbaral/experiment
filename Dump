import os
from PyPDF2 import PdfReader, PdfReadError
from sentence_transformers import SentenceTransformer
import faiss
import numpy as np

# Extract text from a single PDF
def extract_text_from_pdf(pdf_path):
    try:
        reader = PdfReader(pdf_path)
        text = ""
        for page in reader.pages:
            text += page.extract_text() or ""  # Ensure no None is added
        return text
    except PdfReadError as e:
        print(f"Error reading {pdf_path}: {e}")
        return ""  # Return an empty string if the PDF is corrupted or unreadable

# Process all PDFs in a folder and combine text
def extract_text_from_folder(folder_path):
    all_text = ""
    for file in os.listdir(folder_path):
        if file.endswith(".pdf"):
            file_path = os.path.join(folder_path, file)
            text = extract_text_from_pdf(file_path)
            if text:
                all_text += text + "\n"
            else:
                print(f"Skipping {file} due to an error.")
    return all_text



// <meta http-equiv="Content-Security-Policy" content="default-src 'self' https: localhost:* https://*.maze.co/; img-src 'self' https: localhost:* data:; script-src 'unsafe-inline' 'unsafe-eval' https: localhost:*; connect-src 'self' https: localhost:* ws://localhost:* wss://local.scannerjs.com:9714; style-src 'unsafe-inline' https:; object-src 'none'; worker-src blob:;">
